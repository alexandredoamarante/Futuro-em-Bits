document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("main");function t(){let e=document.getElementById("feb-year");e&&(e.textContent=new Date().getFullYear())}function a(){let e=document.getElementById("theme-toggle");e&&("dark"===localStorage.getItem("theme")&&document.body.classList.add("dark-mode"),e.dataset.fbDarkInit||(e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");let e=document.body.classList.contains("dark-mode")?"dark":"light";localStorage.setItem("theme",e)}),e.dataset.fbDarkInit="1"))}function l(){let e=document.querySelector(".gallery-grid"),t=document.getElementById("feb-lightbox");if(!e||!t)return;let a=t.querySelector("img"),l=document.getElementById("feb-lb-close");if(e.querySelectorAll("a").forEach(e=>{"1"!==e.dataset.fbLb&&(e.addEventListener("click",i=>{i.preventDefault(),e.dataset.fbLastFocus=document.activeElement&&document.activeElement.tagName?document.activeElement.tagName:"",a.src=e.getAttribute("href"),a.alt=e.querySelector("img")?.alt||"Imagem da galeria",t.classList.add("active"),t.setAttribute("aria-hidden","false"),l.focus()}),e.dataset.fbLb="1")}),!t.dataset.fbLbCloseInit){function i(){t.classList.remove("active"),t.setAttribute("aria-hidden","true"),a.src="";let e=document.querySelector("[data-fb-last-focus]");e&&e.focus()}l.addEventListener("click",i),t.addEventListener("click",e=>{e.target===t&&i()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&i()}),t.dataset.fbLbCloseInit="1"}}function i(){document.querySelectorAll('input[name="cpf"], #cpf').forEach(e=>{e.dataset.fbMask||(e.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"").slice(0,11);t=(t=(t=t.replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2"),e.target.value=t}),e.dataset.fbMask="1")}),document.querySelectorAll('input[type="tel"], input[name="telefone"], #telefone').forEach(e=>{e.dataset.fbMask||(e.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"").slice(0,11);t=(t=t.replace(/^(\d{2})(\d)/,"($1) $2")).length>10?t.replace(/(\d{5})(\d{4})$/,"$1-$2"):t.replace(/(\d{4})(\d{4})$/,"$1-$2"),e.target.value=t}),e.dataset.fbMask="1")}),document.querySelectorAll('input[name="cep"], #cep').forEach(e=>{e.dataset.fbMask||(e.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"").slice(0,8);t=t.replace(/(\d{5})(\d)/,"$1-$2"),e.target.value=t}),e.dataset.fbMask="1")})}function r(){window.fb_forms_initialized||(document.addEventListener("submit",function(e){var t;let a=e.target;if(!(a instanceof HTMLFormElement))return;let l;if(e.preventDefault(),t=a,l=!0,t.querySelectorAll("input, textarea, select").forEach(e=>{if(e.setCustomValidity(""),e.hasAttribute("required")&&!e.value.trim()&&(e.setCustomValidity("Este campo \xe9 obrigat\xf3rio."),l=!1),"email"===e.type&&e.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)&&(e.setCustomValidity("Digite um e-mail v\xe1lido."),l=!1),"cpf"===e.name&&e.value&&!function e(t){if(!(t=t.replace(/\D/g,""))||11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let a=0,l;for(let i=1;i<=9;i++)a+=parseInt(t.substring(i-1,i))*(11-i);if((10==(l=10*a%11)||11===l)&&(l=0),l!==parseInt(t.substring(9,10)))return!1;a=0;for(let r=1;r<=10;r++)a+=parseInt(t.substring(r-1,r))*(12-r);return(10==(l=10*a%11)||11===l)&&(l=0),l===parseInt(t.substring(10,11))}(e.value)&&(e.setCustomValidity("CPF inv\xe1lido."),l=!1),"tel"===e.type&&e.value){let t=e.value.replace(/\D/g,"");t.length<10&&(e.setCustomValidity("Telefone incompleto."),l=!1)}if("cep"===e.name&&e.value){let a=e.value.replace(/\D/g,"");8!==a.length&&(e.setCustomValidity("CEP inv\xe1lido."),l=!1)}}),!l){a.reportValidity();return}alert("Formul\xe1rio enviado com sucesso!");let i=new FormData(a);console.log("Formul\xe1rio (simulado):",Object.fromEntries(i.entries())),a.reset()},!0),window.fb_forms_initialized=!0)}async function n(r){try{let n=(r||"").trim();if("index.html"===n||"/"===n||"./"===n||""===n||"#"===n){let s=await fetch("index.html");if(!s.ok)throw Error("Falha ao carregar a p\xe1gina inicial.");let d=await s.text(),o=document.createElement("div");o.innerHTML=d;let c=o.querySelector("main")||o;e.innerHTML=c.innerHTML,window.scrollTo(0,0),l(),i(),t(),a();return}n.startsWith("pages/")||(n="pages/"+n.replace(/^(\.*\/)*/,""));let u=await fetch(n);if(!u.ok)throw Error("Falha ao carregar "+n);let f=await u.text(),m=document.createElement("div");m.innerHTML=f;let g=m.querySelector("main")||m;e.innerHTML=g.innerHTML,window.scrollTo(0,0),l(),i(),t(),a()}catch(_){console.error(_),e.innerHTML=`<p style="color:red;">Falha ao carregar o conte\xfado.</p>`}}function s(){window.fb_links_initialized||(document.addEventListener("click",function(e){let t=e.target.closest('a[href$=".html"]');if(!t)return;let a=t.getAttribute("href");if(!a||a.startsWith("http")||a.startsWith("mailto:")||a.startsWith("#"))return;e.preventDefault();let l=a.split("/").pop();n(a);try{window.history.pushState({page:a},"","/"+l)}catch(i){}},!1),window.fb_links_initialized=!0)}s(),t(),l(),i(),r(),a(),window.addEventListener("popstate",e=>{let t=e.state&&e.state.page?e.state.page:null;t?n(t):n("index.html")}),window.fb_reinitUI=()=>{l(),i(),r(),a(),t()}});